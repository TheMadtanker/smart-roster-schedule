{% extends "base.html" %}
{% block content %}


<div class="row">
    <!--Left Sidebar View-->
    <div class="col-2">
        <div class="list-group tab_menu_custom" id="list-tab" role="tablist" style="z-index: 0;">
            <a href="#" data-toggle="modal" data-target="#runVerifyModal"
                class="list-group-item list-group-item-action run_tab_custom"><img
                    class="sidebar-icons tab_image_custom" src="/images/run.png">Run Scheduler</a>
            <a class="list-group-item list-group-item-action tab_custom ml-3 active" id="list-assignments-list"
                data-toggle="list" href="#list-assignments" role="tab" aria-controls="assignments"><img
                    class="sidebar-icons tab_image_custom" src="/images/current_shift.png">Current Shift</a>
            <a class="list-group-item list-group-item-action tab_custom ml-3" id="list-records-list" data-toggle="list"
                href="#list-records" role="tab" aria-controls="records"><img class="sidebar-icons tab_image_custom"
                    src="/images/records.png">Records</a>
            <a class="list-group-item list-group-item-action tab_custom ml-3" id="list-future-list"
                data-toggle="list" href="#list-future" role="tab" aria-controls="future"><img
                    class="sidebar-icons tab_image_custom" src="/images/fastforward.png">Future Shifts</a>
            <a class="list-group-item list-group-item-action tab_custom ml-3" id="list-pastsheets-list"
                data-toggle="list" href="#list-pastsheets" role="tab" aria-controls="pastsheets"><img
                    class="sidebar-icons tab_image_custom" src="/images/pastsheets.png">Past Sheets</a>
        </div>
    </div>
    <!--Card Area-->
    <div class="col-9 mt-5">
        <div class="tab-content" id="nav-tabContent">
            <div class="tab-pane fade show active" id="list-assignments" role="tabpanel"
                aria-labelledby="list-assignments-list">
                <div class="row ml-5">
                    <div class="card-deck">
                        <div class="card text-center card_custom" style="width: 18rem;">
                            <img class="mx-auto custom_card_img" height="80px" src="/images/add-nurse-icon.png"
                                alt="nurse assignment image">
                            <div class="card-body">
                                <div class="card-title">
                                    <h5>Clinical Area Assignment</h5>
                                </div>
                                <p class="card-text text-center">View the Clinical Area Assignment and make quick
                                    changes if necessary</p>
                            </div>
                            <div class="card-footer">
                                <a href="/currentCAASheet" class="btn btn-lg btn-block button_custom">View</a>
                            </div>
                        </div>
                        <div class="card text-center card_custom" style="width: 18rem;">
                            <img class="mx-auto custom_card_img" height="80px" src="/images/patient_records.png"
                                alt="patient assignment image">
                            <div class="card-body">
                                <div class="card-title">
                                    <h5>Patient/Nurse Assignment</h5>
                                </div>
                                <p class="card-text  text-center">View the Patient/Nurse Assignment and make quick
                                    changes if necessary</p>
                            </div>
                            <div class="card-footer">
                                <a href="/currentPNSheet" class="btn btn-lg btn-block button_custom">View</a>
                            </div>
                        </div>
                        <!--Current Nurse Assignment-->
                        <div class="card text-center card_custom" style="width: 18rem;">
                            <img class="mx-auto custom_card_img" height="80px" src="/images/add_nurse.png"
                                alt="patient assignment image">
                            <div class="card-body">
                                <div class="card-title">
                                    <h5>Add Nurses to Current Shift</h5>
                                </div>
                                <p class="card-text text-center">Add all the nurses scheduled to work in current shift
                                </p>
                            </div>
                            <div class="card-footer">
                                <button type=button class="btn btn-lg btn-block button_custom" data-toggle="modal"
                                    data-target="#currAssignmentModal">Assign</button>
                            </div>
                        </div>
                        <!--Charge and Support Nurse Assignment-->
                        <div class="card text-center card_custom" style="width: 18rem;">
                            <img class="mx-auto custom_card_img" height="80px" src="/images/add_nurse.png"
                                alt="patient assignment image">
                            <div class="card-body">
                                <div class="card-title">
                                    <h5>Assign Advanced Roles to Current Shift Nurses</h5>
                                </div>
                                <p class="card-text text-center">Assign advanced roles to nurses scheduled to work in
                                    current shift
                                </p>
                            </div>
                            <div class="card-footer">
                                <button type=button class="btn btn-lg btn-block button_custom" data-toggle="modal"
                                    data-target="#cnSuppAssignmentModal">Assign</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="tab-pane fade" id="list-records" role="tabpanel" aria-labelledby="list-records-list">
                <div class="row ml-5">
                    <div class="card-deck">
                        <div class="card text-center card_custom" style="width: 18rem;">
                            <img class="mx-auto custom_card_img" height="80px" src="/images/nurse-records-icon.png"
                                alt="nurse records image">
                            <div class="card-body">
                                <div class="card-title">
                                    <h5>Nurse Records</h5>
                                </div>
                                <p class="card-text text-center">View all nurses in the database. Add, delete, or edit
                                    nurses freely.</p>
                            </div>
                            <div class="card-footer">
                                <a href="/nurseRecords" class="btn btn-lg btn-block button_custom">View</a>
                            </div>
                        </div>
                        <div class="card text-center card_custom" style="width: 18rem;">
                            <img class="mx-auto custom_card_img" height="80px" src="/images/patient-records-icon.png"
                                alt="patient records image">
                            <div class="card-body">
                                <div class="card-title">
                                    <h5>Patient Records</h5>
                                </div>
                                <p class="card-text text-center">View all patients in the database. Add, delete, or edit
                                    freely.</p>
                            </div>
                            <div class="card-footer">
                                <a href="/patientRecords" class="btn btn-lg btn-block button_custom">View</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="tab-pane fade" id="list-future" role="tabpanel" aria-labelledby="list-future-list">
                <div class="row ml-5">
                    <div class="card-deck">
                        <div class="card text-center card_custom" style="width: 18rem;">
                            <img class="mx-auto custom_card_img" height="80px" src="/images/past-assignments-icon.png"
                                alt="Past Clinical Area Assignments image">
                            <div class="card-body">
                                <div class="card-title">
                                    <h5>Future Shifts Planning</h5>
                                </div>
                                <p class="card-text text-center">View clinical area assignment sheet that is editable. Make changes and save them for future reference.</p>
                            </div>
                            <div class="card-footer">
                                <a href="/futureCAASheet" class="btn btn-lg btn-block button_custom">View</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="tab-pane fade" id="list-pastsheets" role="tabpanel" aria-labelledby="list-pastsheets-list">
                <div class="row ml-5">
                    <div class="card-deck">
                        <div class="card text-center card_custom" style="width: 18rem;">
                            <img class="mx-auto custom_card_img" height="80px" src="/images/past-assignments-icon.png"
                                alt="Past Clinical Area Assignments image">
                            <div class="card-body">
                                <div class="card-title">
                                    <h5>Past Clinical Area Assignments</h5>
                                </div>
                                <p class="card-text text-center">View past clinical area assignment sheets. Search
                                    by date.</p>
                            </div>
                            <div class="card-footer">
                                <a href="/pastCAASheet" class="btn btn-lg btn-block button_custom">View</a>
                            </div>
                        </div>
                        <div class="card text-center card_custom" style="width: 18rem;">
                            <img class="mx-auto custom_card_img" height="80px" src="/images/past-assignments-icon.png"
                                alt="Past Patient/Nurse Assignments">
                            <div class="card-body">
                                <div class="card-title">
                                    <h5>Past Patient/Nurse Assignments</h5>
                                </div>
                                <p class="card-text text-center">View past patient/nurse assignment sheets. Search by
                                    date.</p>
                            </div>
                            <div class="card-footer">
                                <a href="/pastPNSheet" class="btn btn-lg btn-block button_custom">View</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!--Current Shift Nurses Assignment Modal-->
<div class="modal fade" tabindex="-1" role="dialog" aria-hidden="true" id="currAssignmentModal">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">

            <div class="modal-header">
                <h5 class="modal-title">Assign Nurses to Current Shift</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div id="assign-section1" class="col-12 row">
                    <div class="form-group col-5" style="text-align: center;">
                        <label for="currNurseStore">Current Shift Nurses</label>
                        <select multiple size="10" class="form-control" id="currNurseStore">
                            {% for index, nurse in enumerate(nurseList) %}
                            {% if nurse[-1]==1 %}
                            <option id="{{nurse[0]}}" name="{{nurse[0]}}" value="{{nurse[0]}}">{{nurse[1]}} -
                                {{nurse[5]}}</option>
                            {% endif %}
                            {% endfor %}
                        </select>
                    </div>
                    <div class="btn-group-vertical col-2">
                        <button class="btn" onclick="currShiftToggle('left')"><i
                                class="fas fa-chevron-left"></i></button>
                        <br>
                        <button class="btn" onclick="currShiftToggle('right')"><i
                                class="fas fa-chevron-right"></i></button>
                    </div>
                    <div class="form-group col-5" style="text-align: center;">
                        <label for="fullNurseList">Unassigned Nurse List</label>
                        <select multiple size="10" class="form-control" id="fullNurseList">
                            {% for index, nurse in enumerate(nurseList) %}
                            {% if nurse[-1]==0 %}
                            <option id="{{nurse[0]}}" name="{{nurse[0]}}" value="{{nurse[0]}}">{{nurse[1]}} -
                                {{nurse[5]}}</option>
                            {% endif %}
                            {% endfor %}
                        </select>
                    </div>
                </div>
                <hr>
                <div class="form-group">
                    <label for="currPriority">Select Fixed Group</label>
                    <select id="currPriority" class="form-control col-2">
                        {% for num in groupNum %}
                        <option id="option{{num}}" value={{num}}>{{num}}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <form action="/modalSubmit" method="post">
                    <input id="prioritySubmit" name="priority" value="" hidden>
                    <button id="currNurseSubmit" type="submit" class="btn btn-success" name="current_nurses_list"
                        value="">Save</button>
                    <button class="btn btn-secondary" data-dismiss="modal" aria-label="Close">Cancel</button>
                </form>
            </div>
        </div>
    </div>
</div>

<!--Charge + Support Nurse Assignment Modal-->
<div class="modal fade" tabindex="-1" role="dialog" aria-hidden="true" id="cnSuppAssignmentModal">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Assign Advanced Roles</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <!--Charge Nurse Assignment-->
                <div id="cn-assignment" class="col-12 row">
                    <div class="form-group col-5" style="text-align: center;">
                        <label for="currCnStore">Assigned Charge Nurses</label>
                        <select multiple size="8" class="form-control" id="currCnStore">
                            {% for index, nurse in enumerate(nurseList) %}
                            {% if (nurse[-1]==1) and (nurse[11]=="Charge") %}
                            <option class="table-success" id="{{nurse[0]}}" name="{{nurse[0]}}" value="{{nurse[0]}}">
                                {{nurse[1]}} -
                                {{nurse[5]}}</option>
                            {% endif %}
                            {% endfor %}
                        </select>
                    </div>
                    <div class="btn-group-vertical col-2">
                        <button class="btn" onclick="cnToggle('left')"><i class="fas fa-chevron-left"></i></button>
                        <br>
                        <button class="btn" onclick="cnToggle('right')"><i class="fas fa-chevron-right"></i></button>
                    </div>
                    <div class="form-group col-5" style="text-align: center;">
                        <label for="currNurseCN">Current Shift Nurses</label>
                        <select multiple size="8" class="form-control" id="currNurseCN">
                            {% for index, nurse in enumerate(nurseList) %}
                            {% if (nurse[-1]==1) and (nurse[11]!="Charge") %}
                            <option id="{{nurse[0]}}" name="{{nurse[0]}}" value="{{nurse[0]}}">{{nurse[1]}} -
                                {{nurse[5]}}</option>
                            {% endif %}
                            {% endfor %}
                        </select>
                    </div>
                </div>
                <hr>
                <!--Support Nurse Assignment-->
                <div id="support-assignment" class="col-12 row">
                    <div class="form-group col-5" style="text-align: center;">
                        <label for="currSuppStore">Assigned Support Nurses</label>
                        <select multiple size="8" class="form-control" id="currSuppStore">
                            {% for index, nurse in enumerate(nurseList) %}
                            {% if (nurse[-1]==1) and (nurse[11]=="Support") %}
                            <option class="table-warning" id="{{nurse[0]}}" name="{{nurse[0]}}" value="{{nurse[0]}}">
                                {{nurse[1]}} -
                                {{nurse[5]}}</option>
                            {% endif %}
                            {% endfor %}
                        </select>
                    </div>
                    <div class="btn-group-vertical col-2">
                        <button class="btn" onclick="suppToggle('left')"><i class="fas fa-chevron-left"></i></button>
                        <br>
                        <button class="btn" onclick="suppToggle('right')"><i class="fas fa-chevron-right"></i></button>
                    </div>
                    <div class="form-group col-5" style="text-align: center;">
                        <label for="currNurseSupp">Current Shift Nurses</label>
                        <select multiple size="8" class="form-control" id="currNurseSupp">
                            {% for index, nurse in enumerate(nurseList) %}
                            {% if (nurse[-1]==1) and (nurse[11]!="Support") %}
                            <option id="{{nurse[0]}}" name="{{nurse[0]}}" value="{{nurse[0]}}">{{nurse[1]}} -
                                {{nurse[5]}}</option>
                            {% endif %}
                            {% endfor %}
                        </select>
                    </div>
                </div>
                <!--Code Nurse Assignment-->
                <div id="code-assignment" class="col-12 row">
                    <div class="form-group col-5" style="text-align: center;">
                        <label for="currCodeStore">Assigned Code Nurses</label>
                        <select multiple size="8" class="form-control" id="currCodeStore">
                            {% for index, nurse in enumerate(nurseList) %}
                            {% if (nurse[-1]==1) and (nurse[11]=="Code") %}
                            <option class="table-danger" id="{{nurse[0]}}" name="{{nurse[0]}}" value="{{nurse[0]}}">
                                {{nurse[1]}} -
                                {{nurse[5]}}</option>
                            {% endif %}
                            {% endfor %}
                        </select>
                    </div>
                    <div class="btn-group-vertical col-2">
                        <button class="btn" onclick="codeToggle('left')"><i class="fas fa-chevron-left"></i></button>
                        <br>
                        <button class="btn" onclick="codeToggle('right')"><i class="fas fa-chevron-right"></i></button>
                    </div>
                    <div class="form-group col-5" style="text-align: center;">
                        <label for="currNurseCode">Current Shift Nurses</label>
                        <select multiple size="8" class="form-control" id="currNurseCode">
                            {% for index, nurse in enumerate(nurseList) %}
                            {% if (nurse[-1]==1) and (nurse[11]!="Code") %}
                            <option id="{{nurse[0]}}" name="{{nurse[0]}}" value="{{nurse[0]}}">{{nurse[1]}} -
                                {{nurse[5]}}</option>
                            {% endif %}
                            {% endfor %}
                        </select>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <form action="/modalSubmit2" method="POST">
                    <input type="text" id="codeNurseSubmit" hidden name="code_nurses_list" value="">
                    <input type="text" id="suppNurseSubmit" hidden name="support_nurses_list" value="">
                    <button type="submit" id="cNurseSubmit" class="btn btn-success" name="charge_nurses_list"
                        value="">Save</button>
                    <button class="btn btn-secondary" data-dismiss="modal" aria-label="Close">Cancel</button>
                </form>
            </div>
        </div>
    </div>
</div>

<!--Scheduler Verification Modal-->
<div class="modal fade" tabindex="-10" role="dialog" aria-hidden="true" id="runVerifyModal">
    <div class="modal-dialog modal-lg mw-100 w-75">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Please Verify Before Running Scheduler</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="col-12 row">
                    <table class="table table-sm mb-2" id="verifyTable">
                        <thead class="thead-light">
                            <tr>
                                <th>Name</th>
                                <th>Rotation</th>
                                <th>Group #</th>
                                <th>Skill Level</th>
                                <th>A-Trained</th>
                                <th>Transfer</th>
                                <th>IV-Trained</th>
                                <th>Role</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for nurse in nurseList %}
                            {% if nurse[-1]==1 %}
                            <tr>
                                <td>{{nurse[1]}}</td>
                                <td>{{nurse[4]}}</td>
                                <td>{{nurse[5]}}</td>
                                <td>{{nurse[7]}}</td>

                                {% if nurse[8]==0 %}
                                <td>No</td>
                                {% else %}
                                <td>Yes</td>
                                {% endif %}

                                {% if nurse[9]==0 %}
                                <td>No</td>
                                {% else %}
                                <td>Yes</td>
                                {% endif %}

                                {% if nurse[10]==0 %}
                                <td>No</td>
                                {% else %}
                                <td>Yes</td>
                                {% endif %}

                                <td>{{nurse[11]}}</td>
                            </tr>
                            {% endif %}
                            {% endfor %}
                        </tbody>
                    </table>
                    <!--Current Shift Assignment-->
                    <hr>
                    <div class="col-3">
                        <h6>Current Shift Assignments</h6>
                        <select class="form-control" size="8">
                            {% for nurse in nurseList %}
                            {% if (nurse[-1]==1) and (nurse[11]=="Charge") %}
                            <option class="table-success" id="{{nurse[0]}}" name="{{nurse[0]}}" value="{{nurse[0]}}">
                                {{nurse[1]}}</option>
                            {% elif (nurse[-1]==1) and (nurse[11]=="Support") %}
                            <option class="table-warning" id="{{nurse[0]}}" name="{{nurse[0]}}" value="{{nurse[0]}}">
                                {{nurse[1]}}</option>
                            {% elif (nurse[-1]==1) %}
                            <option id="{{nurse[0]}}" name="{{nurse[0]}}" value="{{nurse[0]}}">{{nurse[1]}}</option>
                            {% endif %}
                            {% endfor %}
                        </select>
                    </div>
                    <!--Charge Nurse Assignemnts-->
                    <div class="col-3">
                        <h6>Charge Nurses + Backups</h6>
                        <select class="form-control" size="8">
                            {% for nurse in nurseList %}
                            {% if (nurse[-1]==1) and (nurse[11]=="Charge") %}
                            <option class="table-success" id="{{nurse[0]}}" name="{{nurse[0]}}" value="{{nurse[0]}}">
                                {{nurse[1]}}</option>
                            {% endif %}
                            {% endfor %}
                        </select>
                    </div>
                    <!--Support Nurse Assignments-->
                    <div class="col-3">
                        <h6>Support Nurses + Backups</h6>
                        <select class="form-control" size="8">
                            {% for nurse in nurseList %}
                            {% if (nurse[-1]==1) and (nurse[11]=="Support") %}
                            <option class="table-warning" id="{{nurse[0]}}" name="{{nurse[0]}}" value="{{nurse[0]}}">
                                {{nurse[1]}}</option>
                            {% endif %}
                            {% endfor %}
                        </select>
                    </div>
                    <!--Code Nurse Assignments-->
                    <div class="col-3">
                        <h6>Code Nurses + Backups</h6>
                        <select class="form-control" size="8">
                            {% for nurse in nurseList %}
                            {% if (nurse[-1]==1) and (nurse[11]=="Code") %}
                            <option class="table-danger" id="{{nurse[0]}}" name="{{nurse[0]}}" value="{{nurse[0]}}">
                                {{nurse[1]}}</option>
                            {% endif %}
                            {% endfor %}
                        </select>
                    </div>
                </div>
                <hr>
                <div>
                    <h6>If you see any errors or inconsistencies:</h6>
                    <button class="btn btn-outline-danger mb-2" data-toggle="modal" data-target="#currAssignmentModal"
                        data-dismiss="modal">Edit Current Shift</button><br>
                    <button class="btn btn-outline-danger" data-toggle="modal" data-target="#cnSuppAssignmentModal"
                        data-dismiss="modal">Edit Advanced Roles</button>
                </div>
            </div>
            <div class="modal-footer">
                <a href="/assign" class="btn btn-success" value="">Run Scheduler</a>
                <button class="btn btn-secondary" data-dismiss="modal" aria-label="Close">Cancel</button>
            </div>
        </div>
    </div>
</div>

<!--Quick Links-->
<div id="quickLinks" class="quick-links" onclick="toggleQuicklinks()">
    <div class="quick-link-tab-container">
        <img id="quickLinksIcon" class="quick-link-tab-icon" src="/images/quicklinks-icon.png">
    </div>
    <div id="quicklinksContent" class="quick-links-content">
        <a href="#"><img class="quick-link-icons" src="/images/add-patient-icon.png"><br>Add Patient</a>
        <a href="#"><img class="quick-link-icons" src="/images/add-nurse-icon.png"><br>Add Nurse</a>
        <a href="#" onclick="printExternal('/currentCAASheet')"><img class="quick-link-icons"
                src="/images/print-icon.png"><br>Print Current<br>CA Sheet</a>
        <a href="#" onclick="printExternal('/currentPNSheet')"><img class="quick-link-icons"
                src="/images/print-icon.png"><br>Print Current<br>P/N Sheet</a>
    </div>
</div>

<script>
    var currNurses = null
    var cNurses = null
    var supportNurses = null
    var codeNurses = null

    // Current Shift Assignment Toggle
    function currShiftToggle(side) {
        if (side == "left") {
            var unShiftSelected = $('#fullNurseList').val();
            $('#fullNurseList option:selected').appendTo("#currNurseStore")

            for (i = 0; i < unShiftSelected.length; i++) {
                if (currNurses.includes(unShiftSelected[i])) {
                    continue
                } else {
                    currNurses.push(unShiftSelected[i])
                }
            }
        } else {
            var currShiftSelected = $('#currNurseStore').val();
            $('#currNurseStore option:selected').appendTo("#fullNurseList")

            for (i = 0; i < currShiftSelected.length; i++) {
                if (currNurses.includes(currShiftSelected[i])) {
                    let index = currNurses.indexOf(currShiftSelected[i])
                    if (index > -1) {
                        currNurses.splice(index, 1)
                    }
                } else {
                    continue
                }
            }
        }
    }

    // Charge Nurse Toggle
    function cnToggle(side) {
        if (side == "left") {
            var unShiftSelected = $('#currNurseCN').val();
            $('#currNurseCN option:selected').appendTo("#currCnStore")

            for (i = 0; i < unShiftSelected.length; i++) {
                if (cNurses.includes(unShiftSelected[i])) {
                    continue
                } else {
                    cNurses.push(unShiftSelected[i])
                }
            }
        } else {
            var currShiftSelected = $('#currCnStore').val();
            $('#currCnStore option:selected').appendTo("#currNurseCN")

            for (i = 0; i < currShiftSelected.length; i++) {
                if (cNurses.includes(currShiftSelected[i])) {
                    let index = cNurses.indexOf(currShiftSelected[i])
                    if (index > -1) {
                        cNurses.splice(index, 1)
                    }
                } else {
                    continue
                }
            }
        }
    }

    // Support Nurse Toggle
    function suppToggle(side) {
        if (side == "left") {
            var unShiftSelected = $('#currNurseSupp').val();
            $('#currNurseSupp option:selected').appendTo("#currSuppStore")
            for (i = 0; i < unShiftSelected.length; i++) {
                if (supportNurses.includes(unShiftSelected[i])) {
                    continue
                } else {
                    supportNurses.push(unShiftSelected[i])
                }
            }
        } else {
            var currShiftSelected = $('#currSuppStore').val();
            $('#currSuppStore option:selected').appendTo("#currNurseSupp")

            for (i = 0; i < currShiftSelected.length; i++) {
                if (supportNurses.includes(currShiftSelected[i])) {
                    let index = supportNurses.indexOf(currShiftSelected[i])
                    if (index > -1) {
                        supportNurses.splice(index, 1)
                    }
                } else {
                    continue
                }
            }
        }
    }

    // Code Nurse Toggle
    function codeToggle(side) {
        if (side == "left") {
            var unShiftSelected = $('#currNurseCode').val();
            $('#currNurseCode option:selected').appendTo("#currCodeStore")
            for (i = 0; i < unShiftSelected.length; i++) {
                if (codeNurses.includes(unShiftSelected[i])) {
                    continue
                } else {
                    codeNurses.push(unShiftSelected[i])
                }
            }
        } else {
            var currShiftSelected = $('#currCodeStore').val();
            $('#currCodeStore option:selected').appendTo("#currNurseCode")

            for (i = 0; i < currShiftSelected.length; i++) {
                if (codeNurses.includes(currShiftSelected[i])) {
                    let index = codeNurses.indexOf(currShiftSelected[i])
                    if (index > -1) {
                        codeNurses.splice(index, 1)
                    }
                } else {
                    continue
                }
            }
        }
    }

    // Quick Links
    function toggleQuicklinks() {
        var quickLinks = document.getElementById("quickLinks");
        var quickLinksContent = document.getElementById("quicklinksContent");
        var quickLinksIcon = document.getElementById("quickLinksIcon");

        if (quickLinks.style.width == "200px") {
            quickLinks.style.width = "20px";
            quickLinksContent.style.opacity = "0";
            quickLinksContent.style.visibility = "hidden";
            quickLinksIcon.style.transform = "translate(0%, -50%) scalex(1)";
        }
        else {
            quickLinks.style.width = "200px";
            quickLinksContent.style.visibility = "visible";
            quickLinksContent.style.opacity = "1";
            quickLinksIcon.style.transform = "translate(0%, -50%) scalex(-1)";
        }
    }

    // Event Listeners
    window.addEventListener('load', (event) => {
        // Load currNurse array
        currNurses = "{{currNurseIds}}".split(", ")
        currNurses[0] = currNurses[0].substring(1, currNurses[0].length)
        currNurses[currNurses.length - 1] = currNurses[currNurses.length - 1].substring(0, currNurses[currNurses.length - 1].length - 1)

        // Load supportNurses array 
        supportNurses = "{{suppNursesIds}}".split(", ")
        supportNurses[0] = supportNurses[0].substring(1, supportNurses[0].length)
        supportNurses[supportNurses.length - 1] = supportNurses[supportNurses.length - 1].substring(0, supportNurses[supportNurses.length - 1].length - 1)

        // Load cNurses array
        cNurses = "{{cnNurseIds}}".split(", ")
        cNurses[0] = cNurses[0].substring(1, cNurses[0].length)
        cNurses[cNurses.length - 1] = cNurses[cNurses.length - 1].substring(0, cNurses[cNurses.length - 1].length - 1)

        // Load codeNurses array
        codeNurses = "{{codeNurseIds}}".split(", ")
        codeNurses[0] = codeNurses[0].substring(1, codeNurses[0].length)
        codeNurses[codeNurses.length - 1] = codeNurses[codeNurses.length - 1].substring(0, codeNurses[codeNurses.length - 1].length - 1)
    });

    $("#currNurseSubmit").on("click", (event) => {
        $("#currNurseSubmit").val(currNurses)
    })

    $("#cNurseSubmit").on("click", (event) => {
        $("#codeNurseSubmit").val(codeNurses)
        $("#suppNurseSubmit").val(supportNurses)
        $("#cNurseSubmit").val(cNurses)
    })

    $("#currPriority").on('change', function () {
        $('#prioritySubmit').val(this.value)
    })

    // Filter Data by Column
    $(document).ready(function () {
        // Setup - add a text input to each header cell
        $('#verifyTable thead tr').clone(true).appendTo('#verifyTable thead');
        $('#verifyTable thead tr:eq(1) th').each(function (i) {
            $(this).html('<input class="form-control form-control-sm" type="text" placeholder="Filter..." />');
            $('input', this).on('keyup change', function () {
                if (table.column(i).search() !== this.value) {
                    table
                        .column(i)
                        .search(this.value)
                        .draw();
                }
            });
        });

        var table = $('#verifyTable').DataTable({
            "lengthMenu": [10, 20, 30, 50],
            orderCellsTop: true,
            ordering: true
        });
    });

    function printExternal(url) {
        var printWindow = window.open(url, 'Print', 'left=200, top=200, width=900, height=500, toolbar=0, resizable=0');

        printWindow.addEventListener('load', function () {
            if (Boolean(printWindow.chrome)) {
                printWindow.print();
                setTimeout(function () {
                    printWindow.close();
                }, 500);
            } else {
                printWindow.print();
                printWindow.close();
            }
        }, true);
    }
</script>

<!--DataTables.js-->
<script src=https://cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js></script>

{% endblock %}