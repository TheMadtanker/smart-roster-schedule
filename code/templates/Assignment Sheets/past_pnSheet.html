{% extends "base.html" %}

{% block content %}

<!--Content Here-->
<!--Jumbotron-->
<div class="jumbotron py-3">
  <div class="jumbotron-content">
    <div class="justify-content-md-center row">
      <h1 class="jumbotron-title col-11">Past Assignment Page</h1>
    </div>
    <small>Shift: {{latestState['shift-datetime']}}</small> <br>
    <small>Last Updated: {{latestState['timestamp']}} by {{latestState['author']}}</small><br>
    <div class="text-left" style="position: absolute; top: 1.75%; left: 5%">
      <small>Shift</small>
      <form class="row form-group">
        <select id="date-select" class="form-control form-control-sm col-10">
          {% for index, shift in enumerate(shifts) %}
          <option>{{index}}: {{shift}}</option>
          {% endfor %}
        </select>
        <span><button class="btn btn-sm btn-success" type="submit">View</button></span>
      </form>
      <small>History/Version</small>
      <form class="row form-group">
        <select id="date-select" class="form-control form-control-sm col-10">
          {% for index, versionList in enumerate(versions) %}
          {% for version in versionList %}
          <option>{{index}}: {{version}}</option>
          {% endfor %}
          {% endfor %}
        </select>
        <span><button class="btn btn-sm btn-success" type="submit">View</button></span>
      </form>
    </div>
    <br><br>
    <!--Charge Nurse-->
    <div class="row">
      <div class="col rounded pt-3 px-4 mx-5 shadow-sm" style="background-color: lightgray">
        <div class="row justify-content-center">
          <div class="col-9">
            <h6>Charge Nurses</h6>
          </div>
        </div>
        {% for i in range(3)%}
        <div class="row justify-content-center mb-2">
          <input class="col-8 form-control form-control-sm rounded text-center" type="text"
            {% if latestState['charge'][i] %} {% for nurse in nurseList if nurse[0]==latestState['charge'][i]|int %}
            value="{{nurse[1]}}" {% endfor %} {% endif %} disabled>
        </div>
        {% endfor %}
      </div>
      <!--Support Nurses-->
      <div class="col rounded pt-3 pl-4 pr-5 mx-5 shadow-sm" style="background-color: lightgray;">
        <div class="row justify-content-center">
          <div class="col-8">
            <h6>Support Nurses</h6>
          </div>
        </div>
        {% for i in range(3)%}
        <div class="row justify-content-center mb-2">
          <input class="col-6 offset-1 form-control form-control-sm rounded text-center" type="text"
            {% if latestState['support'][i] %} {% for nurse in nurseList if nurse[0]==latestState['support'][i]|int %}
            value="{{nurse[1]}}" {% endfor %} {% endif %} disabled>
        </div>
        {% endfor %}
      </div>
      <!--Right Column-->
      <div class="col mx-5">
        <div class="row w-100 px-2 shadow-sm"
          style="background-color: lightgray; padding: 10px 30px; border-radius: 5px;">
          <div class="col-4">
            <h6>Code RN</h6>
          </div>
          <input class="col-6 form-control form-control-sm rounded text-center" type="text"
            {% if latestState['code'][0] %} {% for nurse in nurseList if nurse[0]==latestState['code'][0]|int %}
            value="{{nurse[1]}}" {% endfor %} {% endif %} disabled>
          <div class="col-1"></div>
        </div><br>
        <div class="mt-5 rounded col-12 row w-100 px-2 shadow-sm"
          style="background-color: lightgray; padding: 10px 30px; width: 100px">
          <div class="row col-12">
            <h6 class="mt-1 col-4">Fixed</h6>
            <input class="col-4 ml-2 mb-2 form-control form-control-sm rounded text-center" type="text"
              value="{{latestState['fixed']}}" disabled>
          </div>
          <div class="row col-12">
            <h6 class="mt-1 col-4">Flex</h6>
            <input class="col-4 ml-2 form-control form-control-sm rounded text-center" type="text"
              value="{{latestState['flex']}}" disabled>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<<<<<<< Updated upstream
{% if latestState['l_charge'][0] %}
<p>L Charge: {{nurseList[latestState['l_charge'][0]|int][1]}}</p>
{% endif %}

{% if latestState['l_support'][0] %}
<p>L Support: {{nurseList[latestState['l_support'][0]|int][1]}}</p>
{% endif %}

{% if latestState['l_code'][0] %}
<p>L Code: {{nurseList[latestState['l_code'][0]|int][1]}}</p>
{% endif %}
=======
<div class="row L_block_custom" style="width: 50%">

  <div class="col-4">
    {% if latestState['l_charge'][0] %}
    <div class="row">
      <h5 class="mt-1 col-4">L Charge</h5> 
      <input type="text" value="{{nurseList[latestState['l_charge'][0]|int][1]}}" class="L_block_item form-control form-control-sm col-6 ml-2" disabled>
    </div>
    {% endif %}
  </div>

  <div class="col-4">
    {% if latestState['l_support'][0] %}
    <div class="row">
      <h5 class="mt-1 col-4">Support</h5>
      <input type="text" value="{{nurseList[latestState['l_support'][0]|int][1]}}" class="L_block_item form-control form-control-sm col-6 ml-2" disabled>
    </div>
    {% endif %}
  </div>

  <div class="col-4">
    {% if latestState['l_code'][0] %}
    <div class="row">
      <h5 class="mt-1 col-4">L Code</h5>
      <input type="text" value="{{nurseList[latestState['l_code'][0]|int][1]}}" class="L_block_item form-control form-control-sm col-6 ml-2" disabled>
    </div>
    {% endif %}
  </div>
</div>
>>>>>>> Stashed changes

{% set areas=["A", "B", "C", "D", "E", "F"] %}
{% set area_iter = namespace(value=0) %}

<div>
  {% for card_row in range(2) %}
  <div class="card-deck" id="row-{{card_row + 1}}">
    {% for card_col in range(3) %}
    <div class="card shadow" style="border-radius: 15px;" id="pod-{{areas[area_iter.value]}}">
      <div {% if area_iter.value < 4 %} class="card-footer text-center pod-norm" {% else %}
        class="card-footer text-center pod-spec" {% endif %}
        style="border-top-left-radius: 15px; border-top-right-radius: 15px;">
        <h4>Clinical Area {{areas[area_iter.value]}}</h4>
      </div>
      <div class="card-body row justify-content-md-center">
        <div class="col-6 row justify-content-md-center" id="pod-{{areas[area_iter.value]}}-col1">
          {% for asc_loop in range(7) %}
          <div class="col-11 p-2 row mb-2" style="background-color: lightgrey; border-radius: 10px;"
            id="pod-{{areas[area_iter.value]}}-bed-{{asc_loop + 1}}-view">
            <p style="position: relative; left: 5%;">{{ asc_loop + 1 }}</p>
            <div class="input-group input-group-sm px-1">
              <div class="input-group-prepend">
                <label class="input-group-text" style="width: 30px;">P</label>
              </div>
              <select class="form-control" id="pod-{{areas[area_iter.value]}}-bed-{{asc_loop + 1}}-patient-menu"
                disabled>
                {% if latestState['assignment'][areas[area_iter.value]+(asc_loop + 1)|string]['p'][0] %}
                {% set patient_id = latestState['assignment'][areas[area_iter.value]+(asc_loop + 1)|string]['p'][0] | int %}
                <option id="pod-{{areas[area_iter.value]}}-bed-{{ asc_loop + 1 }}-p-{{patient_id}}"
                  value="{{patient_id}}" selected>
                  {% for patient in patientList if patient[0]==patient_id %}
                  {{patient[1]}}
                  {% endfor %}
                </option>
                {% endif %}
              </select>
            </div>
            <!--Nurse Dropdown-->
            <div class="input-group input-group-sm px-1">
              <div class="input-group-prepend">
                <label class="input-group-text" style="width: 30px;">N</label>
              </div>
              <select class=" form-control" id="pod-{{areas[area_iter.value]}}-bed-{{asc_loop + 1}}-nurse-menu"
                disabled>
                {% if latestState['assignment'][areas[area_iter.value]+(asc_loop + 1)|string]['n'][0] %}
                {% set nurse_id = latestState['assignment'][areas[area_iter.value]+(asc_loop + 1)|string]['n'][0] | int %}
                <option id="pod-{{areas[area_iter.value]}}-bed-{{ asc_loop + 1}}-n-{{nurse_id}}" value="{{nurse_id}}"
                  selected>
                  {% for nurse in nurseList if nurse[0]==nurse_id %}
                  {{nurse[1]}}
                  {% endfor %}
                </option>
                {% endif %}
              </select>
            </div>
          </div>
          {% endfor %}
        </div>
        <div class="col-6 row justify-content-md-center" id="pod-{{areas[area_iter.value]}}-col2">
          {% for desc_loop in range(7)|reverse %}
          <div class="col-11 p-2 row mb-2" style="background-color: lightgrey; border-radius: 10px;"
            id="pod-{{areas[area_iter.value]}}-bed-{{desc_loop + 8}}-view">
            <p style="position: relative; left: 5%;">{{ desc_loop + 8 }}</p>
            <!--Patient Dropdown-->
            <div class="input-group input-group-sm px-1">
              <div class="input-group-prepend">
                <label class="input-group-text" style="width: 30px;">P</label>
              </div>
              <select class="form-control" id="pod-{{areas[area_iter.value]}}-bed-{{ desc_loop + 8 }}-patient-menu"
                disabled>
                {% if latestState['assignment'][areas[area_iter.value]+(desc_loop + 8)|string]['p'][0] %}
                {% set patient_id = latestState['assignment'][areas[area_iter.value]+(desc_loop + 8)|string]['p'][0] | int %}
                <option id="pod-{{areas[area_iter.value]}}-bed-{{ desc_loop + 8 }}-p-{{patient_id}}"
                  value="{{patient_id}}" selected>
                  {% for patient in patientList if patient[0]==patient_id %}
                  {{patient[1]}}
                  {% endfor %}
                </option>
                {% endif %}
              </select>
            </div>
            <!--Nurse Dropdown-->
            <div class="input-group input-group-sm px-1">
              <div class="input-group-prepend">
                <label class="input-group-text" style="width: 30px;">N</label>
              </div>
              <select class=" form-control" id="bed-{{ desc_loop + 8 }}-nurse-menu" disabled>
                {% if latestState['assignment'][areas[area_iter.value]+(desc_loop + 8)|string]['n'][0] %}
                {% set nurse_id = latestState['assignment'][areas[area_iter.value]+(desc_loop + 8)|string]['n'][0] | int %}
                <option id="pod-{{areas[area_iter.value]}}-bed-{{ desc_loop + 8 }}-n-{{nurse_id}}" value="{{nurse_id}}"
                  selected>
                  {% for nurse in nurseList if nurse[0]==nurse_id %}
                  {{nurse[1]}}
                  {% endfor %}
                </option>
                {% endif %}
              </select>
            </div>
          </div>
          {% endfor %}
          {% set area_iter.value = area_iter.value + 1 %}
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
  <br>
  {% endfor %}
</div>

<script>
  // Date Change
  $(document).ready(function () {
    $("#type").change(function () {
      var val = $(this).val();
      if (val == "item1") {
        $("#size").html("<option value='test'>item1: test 1</option><option value='test2'>item1: test 2</option>");
      } else if (val == "item2") {
        $("#size").html("<option value='test'>item2: test 1</option><option value='test2'>item2: test 2</option>");
      } else if (val == "item3") {
        $("#size").html("<option value='test'>item3: test 1</option><option value='test2'>item3: test 2</option>");
      } else if (val == "item0") {
        $("#size").html("<option value=''>--select one--</option>");
      }
    });
  });

  // Print Page
  function printPage() {
    var css = 'body',
      head = document.head || document.getElementsByTagName('head')[0],
      style = document.createElement('style');
    style.type = 'text/css';
    style.media = 'print';
    if (style.styleSheet) {
      style.styleSheet.cssText = css;
    } else {
      style.appendChild(document.createTextNode(css));
    }
    head.appendChild(style);
    window.print();
  }
</script>

{% endblock %}